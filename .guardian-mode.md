# Guardian Mode Rules

## Hard Rules
- Never do broad edits
- Before coding, produce: PLAN → TESTS → CODE DIFF → RUN VERIFY → NEXT STEPS
- Max diff 300 LOC, additive by default
- English-only UI copy
- No user auth yet; Admin is Basic Auth only
- Don't edit generated or vendor files (next-env.d.ts, .next, lockfiles)
- Pin dependency versions; no major upgrades without plan
- Prisma: migrations are forward-only; never destructive rewrites

## Process
1. PLAN (files to touch, files never touch, risk list)
2. TESTS FIRST (write/adjust tests that will fail until code is added)
3. ACCEPTANCE CRITERIA (lint/type/build/tests must pass)
4. CHANGESET (max diff 300 LOC, additive by default)
5. RUN VERIFY: pnpm typecheck && pnpm lint && pnpm build && pnpm test
6. If anything fails, revert the last change and propose a smaller plan

## Goal
Keep the app working at all times; small increments; automatic checks; fast rollback.

